function ShtmlToElement(e){var t=document.createElement("template");return e=e.trim(),t.innerHTML=e,t.content.children}function Sreplace(e,t){if(e.outerHTML)e.outerHTML=t;else{var n=document.createElement("div");n.innerHTML="<!-- S-html replace -->",(ObjParent=e.parentNode).replaceChild(n,e),ObjParent.innerHTML=ObjParent.innerHTML.replace("<div><!-- S-html replace --></div>",t)}}function SUpdate(){document.head.innerHTML+="<style>s-html{display:none ! important}</style>";let e=document.getElementsByTagName("s-html");if(e.length>1&&console.warn("Only the first s-html element will be read"),e.length<1){console.warn("S html was added but not used");return}(e=e[0].innerHTML.split("\n")).forEach(t=>{e[e.indexOf(t)]=t.split("").filter(e=>" "!=e).join("").replaceAll('"'," ")});let t={};(e=e.filter(e=>""==!e)).forEach(e=>{let n=e.split(" ");switch((n=n.slice(0,n.length-1))[0]){case"import":if("from"!=n[n.length-2])throw Error("import should be followed by name(s) and then a from");let l=n.slice(1,n.length-2);for(let r=0;r<l.length;r+=2)t[l[r]]=n[n.length-1];break;case"inject":if("with"!=n[2])throw Error("inject should be followed by name and then a with");if(t[n[3]])Array.from(document.getElementsByTagName(n[1])).forEach(e=>{fetch(t[n[3]]).then(async l=>{let r=ShtmlToElement(await l.text()),i=0;if(Array.from(r).forEach(t=>{if(t.attributes[0].nodeValue==n[3]){i+=1;let l=t.innerHTML,r=e.getAttribute("var");"null"!=String(r)&&r.split(";").forEach(e=>{let t=e.trim().split(":");t[0]="${"+t[0]+"}",t.length>1&&(l=l.replaceAll(t[0],t[1]))}),Sreplace(e,l)}}),0==i)throw Error(`${n[3]} not defined in ${t[n[3]]}`)})});else throw Error(n[3]+" is not defined in inject");break;case"":break;default:throw Error("Unknown action "+n[0])}})}window.addEventListener("load",SUpdate);